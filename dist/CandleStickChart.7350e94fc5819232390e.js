var CandleStickChart=webpackJsonp_name_([0],[function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=function(){function t(t,e){var a=[],r=!0,n=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done)&&(a.push(s.value),!e||a.length!==e);r=!0);}catch(t){n=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();a(1);var c=a(5),u=r(c),h=a(7),d=r(h),f=a(6),m=a(8),p=.3,v=16,x="#e94f69",g="#139125",y=function(t){return t.close>t.open?x:g},k=function(t){function e(t){var a=t.width,r=t.height,s=t.container,l=t.data;n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.element=f.select(s),o.svg=o.element.append("svg"),o.svg.attr("width",a).attr("height",r),o.container=s,o.width=a,o.height=r,o.volHeight=r*p,o.baseHeight=r-o.volHeight-v,o.data=l,o.render(),o.initTouchEvents(),o}return s(e,t),o(e,[{key:"render",value:function(){this.renderAxis(),this.renderCandleStick(),this.renderAverageLines(),this.renderVolumes()}},{key:"renderAverageLines",value:function(){for(var t=this.svg,e=this.areaScaleY,a=f.scaleLinear().domain([0,this.data.length-1]).range([0,this.width]),r=["ma5","ma10","ma20","ma60"],n=0;n<r.length;n++){for(var i=r[n],s=0;s<this.data.length&&""==this.data[s][i];s++);if(s==this.data.length)break;var l=f.line().x(function(t,e){return a(e<s?s:e)}).y(function(t,a,r){return e(a<s?r[s]:t)}),o=t.selectAll("."+i).data([this.data.map(function(t){return t[i]})]);o.enter().append("path").attr("class",i).merge(o).attr("d",l),o.exit().remove()}}},{key:"initTouchEvents",value:function(){var t=this.svg,e=this.width,a=this.height,r=this.baseHeight,n=this,i=f.line().x(function(t){return t.x}).y(function(t){return t.y}),s=function(e){var a=t.selectAll(".guide-line").data(e);a.enter().append("path").attr("class","guide-line").merge(a).attr("d",i),a.exit().remove()},o=2,c=function(a,n){var i=t.selectAll(".tip-group").data(a);i.exit().remove(),i=i.enter().append("g").attr("class","tip-group").merge(i),i.selectAll(".tip-cell").data([n]).enter().append("rect").attr("class","tip-cell"),i.selectAll(".tip-text").data([n]).enter().append("text").attr("class","tip-text"),i.each(function(t,a){var i,s=f.select(this);0===a&&(i=s.select(".tip-text").text(n.date)),1===a&&(i=s.select(".tip-text").text(n.close));var l,c,u=i.node().getBBox();0===a?(l=t.x-(u.width+2*o)/2,c=t.y+u.height,l<0&&(l=0),l>e-u.width-2*o&&(l=e-u.width-2*o)):1===a&&(l=t.x+1,c=t.y+u.height/2-o,c<0&&(c=0),c>r-u.height/2&&(c=r-u.height/2)),s.attr("transform","translate("+l+", "+c+")"),i.attr("transform","translate("+o+", 0)");s.select("rect").attr("x",u.x).attr("y",u.y).attr("width",u.width+2*o).attr("height",u.height)})},u=function(){var t=f.touches(this),i=l(t,1),o=l(i[0],1),u=o[0],h=n.barScale,m=h.step(),p=h.bandwidth(),v=Math.round(u/m);if(!(v<0||v>=n.data.length)){var x=n.data[v];u=h(v)+p/2;var g=[{x:u,y:0},{x:u,y:a}],y=n.areaScaleY(x.close),k=[{x:0,y:y},{x:e,y:y}],A=[g,k];s(A),c([{x:u,y:r},{x:0,y:y}],x),n.axisLeftElement.select(".tick text").text("VOL:"+(0,d.default)(x.volume)),n.emit("change",n.data[v])}};t.on("touchstart",u).on("touchmove",u).on("touchend",function(){s([]),c([],null),n.updateVolumeLeftAxis()})}},{key:"renderAxis",value:function(){this.createHorizontalAxis(),this.createVerticalAxis()}},{key:"createHorizontalAxis",value:function(){var t=this.width,e=this.baseHeight,a=this.svg;this.data,this.createBottomTickAxis(),this.bottomAxisElement=a.append("g").attr("class","chart-axis").attr("transform","translate(0, "+e+")");this.updateCandleAreaBottomAxis();var r=t/4,n=f.scaleOrdinal().domain([0,1,2,3,4]).range([0,1*r,2*r,3*r,t-1]),i=f.axisBottom(n).tickSize(e).tickFormat("");this.verticalGuideScale=n,a.append("g").attr("class","chart-axis").call(i).selectAll(".tick line").attr("stroke-dasharray",function(t,e){if(1==e||3==e)return"10, 4"})}},{key:"createVerticalAxis",value:function(){var t=this.svg,e=this.baseHeight,a=(this.data,this.width);this.leftAxisElement=t.append("g").attr("class","chart-axis");this.updateCandleAreaLeftAxis();var r=(0,u.default)(e,0,4),n=f.scaleOrdinal().domain(r).range(r),i=f.axisLeft(n).tickSize(a).tickFormat("");t.append("g").attr("class","chart-axis").attr("transform","translate("+(a-1)+", 0)").call(i).selectAll(".tick line").attr("stroke-dasharray",function(t,e){if(1==e||3==e)return"10, 4"})}},{key:"updateAxis",value:function(){this.updateCandleAreaBottomAxis(),this.updateCandleAreaLeftAxis(),this.updateVolumeLeftAxis()}},{key:"createLeftTickAxis",value:function(){var t=this.baseHeight,e=this.data,a=f.min(e,function(t){var e=[t.low,t.ma5,t.ma10,t.ma20,t.ma60];return f.min(e.filter(function(t){return""!=t}))}),r=f.max(e,function(t){return f.max([t.high,t.ma5,t.ma10,t.ma20,t.ma60])}),n=[a,r],i=[t,0],s=f.scaleOrdinal().domain(n).range(i),l=f.axisRight(s).tickSize(0);return l}},{key:"updateCandleAreaLeftAxis",value:function(){this.leftAxisElement.call(this.createLeftTickAxis()),this.leftAxisElement.selectAll(".tick text").attr("transform",function(t,e){return"translate(0, "+(0==e?-10:10)+")"}).attr("fill",function(t,e){return 1==e?x:g})}},{key:"createBottomTickAxis",value:function(){var t=this.width,e=this.data,a=e.length,r=[e[0].date,a>1?e[a-1].date:""],n=[0,t],i=f.scaleOrdinal().domain(r).range(n),s=f.axisBottom(i).tickSize(0).tickPadding(6);return s}},{key:"updateCandleAreaBottomAxis",value:function(){this.bottomAxisElement.call(this.createBottomTickAxis()),this.bottomAxisElement.selectAll(".tick text").attr("text-anchor",function(t,e){return 0==e?"start":"end"})}},{key:"renderCandleStick",value:function(){var t=this.svg,e=this.width,a=this.data,r=this.baseHeight,n=f.scaleBand().domain(a.map(function(t,e){return e})).range([0,e]).padding(.4),i=parseInt(n.bandwidth()),s=f.min(a,function(t){var e=[t.low,t.ma5,t.ma10,t.ma20,t.ma60];return f.min(e.filter(function(t){return""!=t}))}),l=f.max(a,function(t){return f.max([t.high,t.ma5,t.ma10,t.ma20,t.ma60])}),o=f.scaleLinear().domain([s,l]).range([r,10]);this.areaScaleY=o,this.barScale=n;var c=t.selectAll(".candle").data(a);c.enter().append("rect").attr("class","candle").merge(c).attr("x",function(t,e){return n(e)}).attr("y",function(t,e){return o(Math.max(t.open,t.close))}).attr("width",i).attr("height",function(t){var e=o(Math.min(t.open,t.close))-o(Math.max(t.open,t.close));return e<1&&(e=1),e}).attr("fill",y),c.exit().remove();var u=f.line().x(function(t){return t.x}).y(function(t){return t.y}),h=t.selectAll(".shadow").data(a);h.enter().append("path").attr("class","shadow").merge(h).attr("d",function(t,e){var a=n(e)+i/2,r=o(t.high),s=o(t.low);return u([{x:a,y:r},{x:a,y:s}])}).attr("stroke",y),h.exit().remove()}},{key:"updateVolumeLeftAxis",value:function(){var t=this.volHeight,e=this.data,a=f.max(e,function(t){return t.volume}),r=e.length>0?e[e.length-1].volume:0,n=f.scaleOrdinal().domain(["VOL:"+(0,d.default)(r),(0,d.default)(a),""]).range([0,20,t]),i=f.axisRight(n).tickSize(0);this.axisLeftElement.call(i),this.axisLeftElement.selectAll(".tick text").attr("transform",function(t,e){return"translate(0, "+(2==e?-10:10)+")"})}},{key:"renderVolumes",value:function(){var t=this.svg,e=this.baseHeight,a=this.volHeight,r=this.width,n=(this.data,t.append("g").attr("class","volume-wrap"));n.attr("transform","translate(0, "+(e+v)+")"),this.volumeWrapper=n;this.axisLeftElement=n.append("g").attr("class","chart-axis");this.updateVolumeLeftAxis();var i=f.scaleOrdinal().domain([1,2,3]).range([0,19,a]);n.append("g").attr("class","chart-axis").attr("transform","translate("+(r-1)+", 0)").call(f.axisLeft(i).tickSize(r).tickFormat("")),n.append("g").attr("class","chart-axis").attr("transform","translate(0, "+(a-1)+")").call(f.axisTop(this.verticalGuideScale).tickSize(a-20).tickFormat("")),this.renderVolumeBars()}},{key:"renderVolumeBars",value:function(){var t=this,e=(this.svg,this.baseHeight,this.volHeight),a=this.data,r=0,n=f.max(a,function(t){return t.volume}),i=f.scaleLinear().domain([r,n]).range([e,20]),s=this.volumeWrapper.selectAll(".volume").data(a),l=this.barScale.bandwidth();s.enter().append("rect").attr("class","volume").merge(s).attr("x",function(e,a){return t.barScale(a)}).attr("y",function(t,e){return i(t.volume)}).attr("width",l).attr("height",function(t,a){return e-i(t.volume)}).attr("fill",y),s.exit().remove()}},{key:"update",value:function(t){this.data=t,this.renderCandleStick(),this.renderAverageLines(),this.renderVolumeBars(),this.updateAxis()}}]),e}(m);t.exports=k},function(t,e,a){var r=a(2);"string"==typeof r&&(r=[[t.id,r,""]]);a(4)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,a){e=t.exports=a(3)(),e.push([t.id,".chart-axis line,.chart-axis path{stroke:#d4d4d4}.guide-line{stroke:#555;shape-rendering:crispEdges}.tip-cell{stroke:#555;fill:#fff;shape-rendering:crispEdges}.tip-text{fill:#555;font-size:10px}.ma{stroke:#ec9917}.ma,.ma5{fill:none}.ma5{stroke:#508ce7}.ma10{fill:none;stroke:#ec9917}.ma20{fill:none;stroke:#f94636}.ma60{fill:none;stroke:#2baf2b}",""])},,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(6),n=function(t,e,a){for(var n=r.interpolateNumber(t,e),i=[],s=0;s<=a;s++)i.push(n(s/a));return i};e.default=n},,function(t,e){"use strict";var a=function(){function t(t,e){var a=[],r=!0,n=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(r=(s=l.next()).done)&&(a.push(s.value),!e||a.length!==e);r=!0);}catch(t){n=!0,i=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw i}}return a}return function(e,a){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.exports=function(t){for(var e=[[1e4,"万"],[1e8,"亿"]],r=e.length-1;r>=0;r--){var n=a(e[r],2),i=n[0],s=n[1];if(t>i){var l=(t/i).toFixed(2);return l+s}}return t}}]);